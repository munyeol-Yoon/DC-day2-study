## 기술스택 🛠️

- TypeScript + NestJS + SWC
- Yarn berry + Plug'n'Play + Zero-Install
- TypeORM + PostgreSQL
- Joi
- Jest

위는 프로젝트의 기술스택이다. 왜 사용하였을지 간단히 알아보자.

### TypeScript

우선 NestJS 에서는 TS 사용을 권장한다.

이름처럼 동적언어인 JS에 반해 TS 는 타입을 제한한다. 이로서 변수나 함수, 객체 등 타입을 명시할 수 있어 개발과정에서 발생하는 오류를 예방할 수 있다.

컴파일 시점에 타입 검사를 수행해 런타임 오류의 가능성을 줄이고, 오류 발생시 디버깅이 편리하다.

또 TS 는 인터페이스와 추상 클래스를 제공한다. 이때문에 일관된 코드를 짤 수 있으며, 시스템 구조를 더 명확하게 할 수 있다.

### NestJS

가장 큰 장점으로 모듈화된 구조로 서로 의존하는 형태를 띈다.

모듈화가 되어있지 않고 자유로운 express 같은 경우는 개발을 지속하고 규모가 커지다 보면 서로의 의존관계가 없고 구조가 자유로워 복잡해진다.

모듈화된 구조로 AppModule 부터 시작해 계층적으로 의존하는 트리의 형태가 되고, 협업이 용이해질 것이며 유지보수가 간편하다.

express 는 자유로워 복잡해진다고 했는데, 이에 반해 NestJS 는 개발자를 절재해 스파게티코드가 되는일을 막아준다.

### SWC

Speedy Web Compiler 는 Rust 에서 작성된 초고속 JS/TS 컴파일러이다.

이를 Nest cli 와 함께 사용하면 개발 프로세스 속도를 크게 향상시킬 수 있다. (**TS 컴파일러의 약 20배**)

- 링크 : [NestJS swc 공식문서](https://docs.nestjs.com/recipes/swc#cli-plugins-swc)

- 링크 : [SWC docs](https://swc.rs/docs/getting-started)

### Yarn berry + Plug'n'Play + Zero-Install

Yarn 패키지 매니저의 2번째 버전.

**Q. 왜 NPM 이 아닌 yarn 을 사용할까?**

- 매우 큰 공간차지
- 비효율적인 의존성 목록 검색
- 중복제거 불가
- 최적화하려다 유령 의존성 발생

이러한 문제를 해결하기 위해 Yarn berry 가 등장했다.

Plug'n'Play 라는 개념을 사용해 이 문제를 해결하는데, pnp 는 버전, 위치, 의존성 등을 담고있다.

이는 node_modules 를 생성하지 않으며, 기본 캐시폴더에 zip 파일로 경로를 저장해서 이 경로를 .pnp.cjs 에 명시한다.

**Yarn berry 의 특징**

- .pnp.cjs 를 통해 관리되기 떄문에 외부환경에 영향을 받지 않는다.
- pnp 에서 제공하는 자료구조를 이용하여 위치를 찾는다.
- 패키지 중복설치가 되지 않는다.
- zero-install을 사용하면 라이브러리 설치 없이 사용이 가능하다.

아래는 왜 Yarn berry 를 사용해야하는지 자세하게 기술해놓은 기술 블로그이다.

- 링크 : [node_modules로부터 우리를 구원해 줄 Yarn Berry](https://toss.tech/article/node-modules-and-yarn-berry)

### TypeORM

- 쿼리를 작성할 필요없이 데이터베이스와 상호작용에서 유리
- TypeScript 로 작성되었기에 NestJS 와 매우 좋은 호환성

### PostgreSQL

|      | MySQL                                                                   | PostgreSQL                                                             |
| ---- | ----------------------------------------------------------------------- | ---------------------------------------------------------------------- |
| 장점 | 오픈 소스(부분 유료), 읽기 쿼리에 매우 빠른 성능, 많은 레퍼런스 및 자료 | - 오픈 소스(완전 무료) 복잡한 쿼리 최적화(다양한 데이터를 다룰때 유용) |
| 단점 | 복잡한 쿼리에 대한 성능                                                 | 간단한 쿼리에 대한 성능, 학습 곡선                                     |

왜 PostgreSQL 을 사용하는지는 조금더 보충이 필요할 것 같다.

### Joi

환경변수의 값을 검증하기 위해 사용

### Jest

테스트를 위한 Jest 사용
