# 토큰 블랙리스트

### Q. 왜 토큰 블랙리스트를 사용할까?

stateless 특성에 따라 서버가 클라이언트의 인증 상태를 직접 관리하지 않기 때문에 JWT 기반 인증시스템에서 문제가 발생한다.

즉 클라이언트에서 로그아웃 요청이 오더라도 이미 발급된 토큰들에 대한 관리가 안된다는 것이다.

때문에 REFresh token 이 만료되지 않는 한 계속해서 access token 을 발급하게 된다.

### Q. 방안은?

1. 프론트엔드에서 토큰을 삭제한다.

- **장점** : 구현이 간단하고 즉각적으로 클라이언트에서 로그아웃 가능
- **단점** : 서버 측에서는 여전히 토큰이 유효, 만약 토큰이 타인에게 노출되면 보안문제가 발생할 수 있다.

2. 토큰 블랙리스트 관리

- JWT가 만료되지 않은 상태에서 로그아웃 요청이 오는 경우, 서버측에서 해당 토큰을 블랙리스트로 처리한다.
- 인증 필터에서 매 요청마다 토큰이 블랙리스트에 해당하는 토큰인지 확인해야한다.
- **장점** : 서버 측에서 토큰을 더 효과적으로 관리할 수 있다. 노출된 토큰에 대한 보안 위험을 최소화 할 수 있다.
- **단점** : 매 요청마다 블랙리스트를 확인해야 하므로, stateless한 JWT의 장점을 상실한다.

3. 리프레시 토큰의 기간 만료 처리

- 요청은 사용자가 로그아웃을 요청할 때 리프레시 토큰을 무효화해, 해당 사용자가 더 이상 새로운 액세스 토큰을 발급받지 못하도락 한다.
- **장점** : 사용자의 로그아웃 요청에 대해 서버 측에서 적극적으로 대응할 수 있으며, 액세스 토큰 재발급의 연속성을 차단해 보안을 강화한다.
- **단점** : 리프레시 토큰에 한해서 확인 로직이 필요하지만, 마찬가지로 stateless 한 JWT 의 장점을 상실한다.
